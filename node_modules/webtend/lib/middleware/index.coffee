###*!
* Copyright(c) 2012 vicanso 腻味
* MIT Licensed
###
_ = require 'underscore'
appInfo = require './appinfo'
session = require './session'
middleware = 
  staticHandler : () ->
    return require('./static').handler()
  sessionParser : () ->
    return session.parser()
  infoParser : () ->
    return appInfo.parser()
  fileImporter : () ->
    return require './fileimporter'
  fileMerger : () ->
    return require './filemerger'
  addInfoParser : (parser) ->
    if _.isFunction parser
      appInfo.addParser parser
  addSessionParser : (appName, redisOptions, options) ->
    if appName && redisOptions
      session.addParser appName, redisOptions, options
  httpHandler : () ->
    return require './httphandler'
  routeHandler : () ->
    return require './routehandler'
    

module.exports = middleware